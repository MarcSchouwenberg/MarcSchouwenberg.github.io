<!DOCTYPE html>
<html>
	<head>
		<title>LINGO!</title>
        <link rel="stylesheet" href="../githubstyles.css"/>
		<style type="text/css">
#inputField {
	cursor: text;
}
textarea {
	font-family: "Courier New";
	font-size: 20px;
}
div#gamefield {
	width: 400px;
	height: 600px;
}
div.lttr {
	text-shadow: 3px 3px 5px black;
	width: 13.5%;
	height: 54px;
	background-image: linear-gradient(to bottom right, rgb(92, 148, 204), lightblue);
	display: inline-block;
	font-size: 35px;
	border: 1px solid black;
	border-radius: 5px;
	text-align: center;
	-webkit-text-stroke: 0.5px black;
}

		</style>
		<script id="opts" src="lingolist.js"></script>
		<script type="text/javascript">

var lingoWord;
var turnsDone;
var maxTurns;
var wordSize;

window.onload = function(){
	document.getElementById("inputField").addEventListener("keyup", function(event) {
	    event.preventDefault();
	    if (event.keyCode === 13) {
	    	submitWord();
	    }
	});
}

function pickaword(){
	lingoWord = words[wordSize-5][Math.floor(Math.random()*words[wordSize-5].length)];
}
function submitWord(){
	if (turnsDone<maxTurns) {
	var newInput = document.getElementById("inputField");
	while (newInput.value.charAt((newInput.value.length)-1) == " "){
		newInput.value=newInput.value.slice(0,(newInput.value.length-1));
		newInput.value=newInput.value.replace(/ /g, "");
	}
	if (newInput.value.length>wordSize) {
		document.getElementById("feedback").innerHTML="te lang!";
	} else if (newInput.value.length<wordSize){
		document.getElementById("feedback").innerHTML="te kort!";
	} else {
		if (newInput.value.match(/^[A-Z,a-z]+$/)) {
			newInput.value=newInput.value.toUpperCase();
			document.getElementById("feedback").innerHTML="OK!";
			document.getElementById("raadLijst").title=document.getElementById("raadLijst").title.concat(newInput.value+"\n");

			var i=0;
			var t = setInterval(printLetter, 500);
			function printLetter(){
				if (i >= newInput.value.length){
					clearInterval(t);
					turnsDone++;
					giveFeedBack();
					newInput.value="";
				} else {
					var newLetter = newInput.value.charAt(i);
					var grandChild = document.getElementById("gamefield").children[turnsDone].children[i];
					grandChild.innerHTML=newLetter;
					grandChild.style.color="white";
					if (lingoWord.indexOf(newInput.value.charAt(i),0)>-1){
						if (newInput.value.charAt(i)==lingoWord.charAt(i)) {
							document.getElementsByTagName("audio")[0].src = "lingogoed2.wav";
							document.getElementsByTagName("audio")[0].volume="0.5";
							grandChild.style.backgroundImage="linear-gradient(to right bottom, rgb(153, 6, 2), rgb(253,64,23))";
						} else {
							document.getElementsByTagName("audio")[0].src = "lingofout2.wav";
							document.getElementsByTagName("audio")[0].volume="0.5";
							grandChild.style.color="white";
							grandChild.style.borderRadius= "250px";
							grandChild.style.border= "none";
							grandChild.style.backgroundImage="linear-gradient(to bottom right, rgb(254, 220, 15), lightyellow)";
						}
					} else {
						document.getElementsByTagName("audio")[0].src = "lingofout.wav";
						document.getElementsByTagName("audio")[0].volume="0.3";
						grandChild.style.color="white";
						grandChild.style.backgroundImage="linear-gradient(to bottom right, rgb(92, 148, 204), lightblue)";
					}
					i++;
				}
			}

function giveFeedBack(){
			if (newInput.value==lingoWord) {
				document.getElementsByTagName("audio")[0].src = "lingowinst2.wav";
				document.getElementsByTagName("audio")[0].volume="0.4";
				document.getElementsByTagName("audio")[1].src = "";
				document.getElementsByTagName("audio")[2].src = "";
				document.getElementById("feedback").innerHTML=
				"GEWONNEN!! Het was inderdaad "+lingoWord
				+"! <i>Nieuw spel? Klik op 'NIEUW SPEL'! </i> :)<br>";
				document.getElementById("menu").style.display="block";
			} else if (turnsDone==maxTurns){
				document.getElementsByTagName("audio")[0].src = "lingoverlies.wav";
				document.getElementsByTagName("audio")[0].volume="0.4";
				document.getElementsByTagName("audio")[1].src = "";
				document.getElementsByTagName("audio")[2].src = "";
				document.getElementById("feedback").innerHTML=
				"VERLOREN!!!! Het woord was "+lingoWord
				+"! <i>Nieuw spel? Klik op 'NIEUW SPEL'! </i> :)<br>";
				document.getElementById("menu").style.display="block";
			} else {
			}

}
		} else {
			document.getElementById("feedback").innerHTML="Alleen letters aub....";
		}
	}
	document.getElementById("trnsdn").innerText=turnsDone;
	}
}

function createGame(){
	document.getElementsByTagName("audio")[1].src = "lingotrack.wav";
	document.getElementsByTagName("audio")[1].volume="0.5";
	document.getElementsByTagName("audio")[2].src = "lingotrack2.wav";
	document.getElementsByTagName("audio")[2].volume="0.8";
	turnsDone = 0;
	for (var i = 0; i < document.forms[0].length; i++) {
		if (document.forms[0][i].checked){
			wordSize = i+5;
			document.getElementById("inputField").maxLength = i+5;
		}
	}
	for (var i = 0; i < document.forms[1].length; i++) {
		if (document.forms[1][i].checked){
			maxTurns = i+1;
		}
	}
	document.getElementById("menu").style.display="none";
	document.getElementById("gamefield").innerHTML="";
	document.getElementById("feedback").innerHTML="";
	document.getElementById("raadLijst").title="";
	document.getElementById("trnsdn").innerHTML="0";
	for (var i = 0; i < maxTurns; i++) {
		var newRow = document.createElement("div");
		newRow.className="row";
		for (var j = 0; j < wordSize; j++) {
			var letterbox = document.createElement("div");
			letterbox.className = "lttr";
			newRow.appendChild(letterbox);
			}
		document.getElementById("gamefield").appendChild(newRow);
	}
	pickaword();
}
		</script>
	</head>
	<body>
		<div style="font-size: 10px" id="menu">
		<form name="wordSizer"> Woordlengte:
			<input type="radio" name="sizer" id="five" checked>5
			<input type="radio" name="sizer" id="six">6
			<input type="radio" name="sizer" id="seven">7
		</form>
		<form name="numGuesses"> Aantal beurten:
			<input type="radio" name="number">1
			<input type="radio" name="number">2
			<input type="radio" name="number">3
			<input type="radio" name="number">4
			<input type="radio" name="number" id="five">5
			<input type="radio" name="number" id="six">6
			<input type="radio" name="number" id="seven">7
			<input type="radio" name="number" id="eight">8
			<input type="radio" name="number" id="nine">9
			<input type="radio" name="number" checked id="ten">10
		</form>
<br>
<button class="button1" autofocus="" onclick="createGame()">NIEUW SPEL</button>
		</div>
<br>
<br>
		<button class="button1" id="raadLijst" title="">Gekozen woorden na beurt <span id="trnsdn">0</span><i> (hover)</i></button>
		<br>
		<input id="inputField" placeholder="tekst hier aub :)" maxlength="0">
		<button class="button1" type="submit" onclick="submitWord()" name="sbmt" value="Okay!">OKAY!</button>
		<span id="feedback"></span>
		<div id="gamefield">
		</div>
		<div style="display: none" id="sound">
			<audio autoplay="true" src=""> no audio </audio>
		</div>
		<div style="display: none" id="music1">
			<audio autoplay="true" loop src=""> no audio </audio>
		</div>
		<div style="display: none" id="music2">
			<audio autoplay="true" loop src=""> no audio </audio>
		</div>
	</body>
</html>